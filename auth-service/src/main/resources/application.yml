server:
  port: 8090
spring:
  application:
    name: auth-service
  profiles:
    active: ${APPLICATION_PROFILE:local}
    include: oauth
  jpa:
    open-in-view: false
  kafka:
    consumer:
      group-id: auth-service-group
  data:
    redis:
      connect-timeout: 3000
      timeout: 3000
app:
  auth:
    jwt:
      secret-key: ${SECRET_KEY}
      token-type: ${TOKEN_TYPE}
      access-token-valid-time: ${ACCESS_TOKEN_VALID_TIME}
      refresh-token-valid-time: ${REFRESH_TOKEN_VALID_TIME}
    oauth:
      authorization-uri: ${OAUTH_AUTHORIZATION_URI}
      authorized-redirect-uris: ${AUTHORIZED_REDIRECT_URIS}
---
spring:
  config:
    activate:
      on-profile: local
  cloud:
    config:
      enabled: false
  jpa:
    hibernate:
      ddl-auto: create
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQLDialect
        default_batch_fetch_size: 100
        show_sql: true
        format_sql: true
  datasource:
    url: jdbc:mysql://localhost:3306/brieflyz?createDatabaseIfNotExist=true
    username: ${MYSQL_USERNAME}
    password: ${MYSQL_ROOT_PASSWORD}
  security:
    oauth2:
      client:
        registration:
          google:
            redirect-uri: http://localhost:8090/login/oauth2/code/google
          kakao:
            redirect-uri: http://localhost:8090/login/oauth2/code/kakao
          naver:
            redirect-uri: http://localhost:8090/login/oauth2/code/naver
  kafka:
    bootstrap-servers: localhost:9092
app:
  auth:
    oauth:
      redirect-uri: http://localhost:8090/login/oauth2/code/{registrationId}
    kafka:
      num-of-partitions: 1
      replication-factor: 1
---
spring:
  config:
    activate:
      on-profile: dev
  cloud:
    config:
      enabled: false
  jpa:
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQLDialect
        default_batch_fetch_size: 100
        show_sql: true
        format_sql: true
  datasource:
    hikari:
      source:
        jdbc-url: jdbc:mysql://mysql-source:3306/brieflyz_auth?createDatabaseIfNotExist=true
        username: ${MYSQL_USERNAME}
        password: ${MYSQL_ROOT_PASSWORD}
        pool-name: auth-service-source-pool
        maximum-pool-size: 3
        minimum-idle: 1
      replica:
        jdbc-url: jdbc:mysql://mysql-replica:3306/brieflyz_auth?createDatabaseIfNotExist=true
        username: ${MYSQL_USERNAME}
        password: ${MYSQL_ROOT_PASSWORD}
        pool-name: auth-service-replica-pool
        maximum-pool-size: 5
        minimum-idle: 3
        read-only: true
  security:
    oauth2:
      client:
        registration:
          google:
            redirect-uri: http://localhost/login/oauth2/code/google
          kakao:
            redirect-uri: http://localhost/login/oauth2/code/kakao
          naver:
            redirect-uri: http://localhost/login/oauth2/code/naver
  data:
    redis:
      cluster:
        nodes:
          - redis-0:6379
          - redis-1:6379
          - redis-2:6379
  kafka:
    bootstrap-servers: kafka-0:9092,kafka-1:9093,kafka-2:9094
app:
  auth:
    oauth:
      redirect-uri: http://localhost/login/oauth2/code/{registrationId}
    kafka:
      num-of-partitions: 3
      replication-factor: 3
---
spring:
  config:
    activate:
      on-profile: prod
    import: configserver:http://config-server:8888/
  cloud:
    config:
      name: auth-service
      profile: prod